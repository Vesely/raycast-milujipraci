"use strict";var v=Object.create;var f=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var R=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),A=(r,t)=>{for(var i in t)f(r,i,{get:t[i],enumerable:!0})},m=(r,t,i,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of k(t))!H.call(r,a)&&a!==i&&f(r,a,{get:()=>t[a],enumerable:!(u=_(t,a))||u.enumerable});return r};var d=(r,t,i)=>(i=r!=null?v(P(r)):{},m(t||!r||!r.__esModule?f(i,"default",{value:r,enumerable:!0}):i,r)),T=r=>m(f({},"__esModule",{value:!0}),r);var x=R(($r,$)=>{var D=require("node:tty"),G=D?.WriteStream?.prototype?.hasColors?.()??!1,n=(r,t)=>{if(!G)return a=>a;let i=`\x1B[${r}m`,u=`\x1B[${t}m`;return a=>{let g=a+"",c=g.indexOf(u);if(c===-1)return i+g+u;let h=i,l=0,C=(t===22?u:"")+i;for(;c!==-1;)h+=g.slice(l,c)+C,l=c+u.length,c=g.indexOf(u,l);return h+=g.slice(l)+u,h}},e={};e.reset=n(0,0);e.bold=n(1,22);e.dim=n(2,22);e.italic=n(3,23);e.underline=n(4,24);e.overline=n(53,55);e.inverse=n(7,27);e.hidden=n(8,28);e.strikethrough=n(9,29);e.black=n(30,39);e.red=n(31,39);e.green=n(32,39);e.yellow=n(33,39);e.blue=n(34,39);e.magenta=n(35,39);e.cyan=n(36,39);e.white=n(37,39);e.gray=n(90,39);e.bgBlack=n(40,49);e.bgRed=n(41,49);e.bgGreen=n(42,49);e.bgYellow=n(43,49);e.bgBlue=n(44,49);e.bgMagenta=n(45,49);e.bgCyan=n(46,49);e.bgWhite=n(47,49);e.bgGray=n(100,49);e.redBright=n(91,39);e.greenBright=n(92,39);e.yellowBright=n(93,39);e.blueBright=n(94,39);e.magentaBright=n(95,39);e.cyanBright=n(96,39);e.whiteBright=n(97,39);e.bgRedBright=n(101,49);e.bgGreenBright=n(102,49);e.bgYellowBright=n(103,49);e.bgBlueBright=n(104,49);e.bgMagentaBright=n(105,49);e.bgCyanBright=n(106,49);e.bgWhiteBright=n(107,49);$.exports=e});var wr={};A(wr,{CurrentBranch:()=>S,PreviousBranch:()=>W,changeWorkingDirectory:()=>N,checkout:()=>Q,checkoutOrCreate:()=>V,clean:()=>sr,clone:()=>q,commitEverything:()=>cr,commitPath:()=>gr,deleteBranch:()=>b,deleteLocalAndRemoteBranch:()=>X,didFileChangedSince:()=>ir,fetch:()=>tr,getCommitSha:()=>Y,getFirstCommit:()=>L,getRelativePath:()=>M,getRemote:()=>F,hardReset:()=>er,hasRemoteBranch:()=>rr,hasTag:()=>or,hasUncommittedChanges:()=>j,isGitInstalled:()=>O,isInsideWorkTree:()=>U,isLocalHeadAheadOfRemote:()=>nr,listCommits:()=>pr,merge:()=>fr,pull:()=>lr,push:()=>ar,readConfig:()=>Z,setLocalConfig:()=>J,setRemote:()=>z,tagCurrentCommit:()=>ur,tags:()=>hr,useSparseCheckoutCone:()=>K});module.exports=T(wr);var p=require("child_process");var s=d(x());var xr=(0,s.blue)((0,s.dim)("internal only"));function E(r,t,i){console.log(I[r]+t),typeof i?.exit<"u"&&process.exit(i.exit)}var I={wait:`\u{1F550}${(0,s.blue)("wait")}  - `,info:`${process.env.GITHUB_ACTIONS==="true"?"\u2139\uFE0F":"\u2139\uFE0F "}${(0,s.cyan)("info")}  - `,success:`\u2705${(0,s.green)("ready")}  - `,warn:`${process.env.GITHUB_ACTIONS==="true"?"\u26A0\uFE0F":"\u26A0\uFE0F "}${(0,s.yellow)("warn")}  - `,error:`\u{1F4A5}${(0,s.red)("error")}  - `,event:`\u26A1\uFE0F${(0,s.magenta)("event")}  - `,paymentPrompt:`\u{1F4B0}${(0,s.yellowBright)("plan")}  - `};var y=d(require("path")),S=".",W="-";async function L(){let t=(await o("git rev-list --max-parents=0 HEAD",{throwOnError:!0})).split(/\r?\n/).filter(Boolean);return t[t.length-1]}var w;function N(r){w=r}function o(r,t){return new Promise((i,u)=>{(0,p.exec)(r,{cwd:w},(a,g,c)=>{if(t.throwOnError&&a){u(new Error(`failed running git ${a.message.replace(/oauth2:gho_[a-zA-Z0-9]+@/g,"oauth2:gho_xxxxx")}
${g.trim()}
${c.trim()}`));return}i(g.trim())})})}function O(){return new Promise(r=>{(0,p.exec)("git --version",t=>{r(t===null)})})}async function U(){return await O()?await o("git rev-parse --is-inside-work-tree",{throwOnError:!1})==="true":(E("info","git is not installed"),!1)}async function j(){return await o("git status -s",{throwOnError:!0})!==""}async function F(){return await B()?(await o("git remote get-url origin",{throwOnError:!1})).replace(/\.[^./]+$/,""):""}function M(){return o("git rev-parse --show-prefix",{throwOnError:!0})}async function Y(){return await B()?o("git rev-parse HEAD",{throwOnError:!0}):""}async function q(r,t){w=y.default.dirname(t),await o(`git clone --filter=blob:none --no-checkout ${r} "${t}"`,{throwOnError:!0})}async function z(r,t){try{await o(`git remote set-url ${r} ${t}`,{throwOnError:!0})}catch{await o(`git remote add ${r} ${t}`,{throwOnError:!0})}}function Z(r){return o(`git config --get ${r}`,{throwOnError:!0})}function J(r,t){return o(`git config --local ${r} "${t}"`,{throwOnError:!0})}function K(r){return o(`git sparse-checkout set ${r}`,{throwOnError:!0})}function Q(r){return o(`git checkout ${r}`,{throwOnError:!0})}function V(r){return o(`git checkout -b ${r} || git checkout ${r}`,{throwOnError:!0})}function b(r){return o(`git branch -D ${r}`,{throwOnError:!1})}async function X(r){return await b(r),o(`git push origin -d ${r}`,{throwOnError:!1})}async function rr(r){return await o(`git ls-remote --heads origin ${r}`,{throwOnError:!1})!==""}function tr(r,t){return o(`git fetch ${r} ${t} --depth=1`,{throwOnError:!1})}function er(r){return o(`git reset --hard ${r}`,{throwOnError:!0})}async function nr(r){let t=await o(`git rev-parse ${r}`,{throwOnError:!0}),i=await o(`git rev-parse origin/${r}`,{throwOnError:!0});return await o(`git merge-base --is-ancestor ${i} ${t} && echo "success"`,{throwOnError:!1})==="success"}async function or(r){return await o(`git tag -l ${r}`,{throwOnError:!1})!==""}async function ir(r,t){return await o(`git diff HEAD..${t} -- "${r}"`,{throwOnError:!0})!==""}function sr(){return o("git clean -fd",{throwOnError:!0})}function ar(r){return o(`git push -u origin ${r}`,{throwOnError:!0})}function ur(r,t){return o(`git tag -f -a ${r} -m "${t}"`,{throwOnError:!0})}function gr(r,t){return o(`git add "${r}" && git commit -m "${t}"`,{throwOnError:!0})}function cr(r){return o(`git add . && git commit -m "${r}"`,{throwOnError:!0})}async function lr(r){try{return await o(`git pull origin ${r} --ff`,{throwOnError:!0})}catch(t){if(t instanceof Error&&t.message.includes("fatal: refusing to merge unrelated histories"))return await o("git fetch --deepen=1",{throwOnError:!0}),await o(`git pull origin ${r} --ff`,{throwOnError:!0});throw t}}function fr(r){return o(`git merge ${r}`,{throwOnError:!0})}function hr(r){return{latestPullTag:"__raycast_latest_pull_"+r+"__",latestPublishTag:"__raycast_latest_publish_"+r+"__"}}async function pr(r){return(await o(`git log --pretty=format:%s${r?` HEAD...${r}`:""}`,{throwOnError:!0})).split(`
`)}async function B(){try{return await o("git remote get-url origin",{throwOnError:!1}),!0}catch{return!1}}0&&(module.exports={CurrentBranch,PreviousBranch,changeWorkingDirectory,checkout,checkoutOrCreate,clean,clone,commitEverything,commitPath,deleteBranch,deleteLocalAndRemoteBranch,didFileChangedSince,fetch,getCommitSha,getFirstCommit,getRelativePath,getRemote,hardReset,hasRemoteBranch,hasTag,hasUncommittedChanges,isGitInstalled,isInsideWorkTree,isLocalHeadAheadOfRemote,listCommits,merge,pull,push,readConfig,setLocalConfig,setRemote,tagCurrentCommit,tags,useSparseCheckoutCone});
